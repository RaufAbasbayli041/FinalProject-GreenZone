# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Ä–æ–ª–∏:
- **Admin** ‚Üí `/admin` (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
- **Customer** ‚Üí `/` (–æ–±—ã—á–Ω—ã–π UI)

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **login-form.tsx**
- **–ü—Ä—è–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏** –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
- **–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–æ–ª–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** —Ä–æ–ª–∏ (—Å—Ç—Ä–æ–∫–∞, –º–∞—Å—Å–∏–≤, —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π)
- **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 2. **auth-context.tsx**
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–∏ –∏–∑ —Ç–æ–∫–µ–Ω–∞
- **–§—É–Ω–∫—Ü–∏—è `getUserRoleFromToken()`** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–æ–ª–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π** —Ä–æ–ª–∏ –≤ JWT
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤ —Ä–æ–ª–µ–π**

### 3. **app/profile/page.tsx**
- **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
- **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π** –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Ç–æ–∫–µ–Ω–∞

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### –®–∞–≥ 1: –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ Admin
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/login`
2. –í–≤–µ–¥–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ä–æ–ª—å—é Admin
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/admin`

### –®–∞–≥ 2: –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ Customer
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/login`
2. –í–≤–µ–¥–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ä–æ–ª—å—é Customer
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
1. –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/profile`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–æ–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç

## üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
Token payload: { role: "Admin", ... }
User role from token: Admin
Admin role detected, redirecting to admin panel
```

–ò–ª–∏:
```
Token payload: { role: "Customer", ... }
User role from token: Customer
Customer role detected, redirecting to home page
```

## üìù –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–æ–ª–∏ –≤ JWT:

1. **–ü–æ–ª–µ `role`**: `{ "role": "Admin" }`
2. **–ü–æ–ª–µ `roles`**: `{ "roles": ["Admin"] }`
3. **ClaimTypes.Role**: `{ "http://schemas.microsoft.com/ws/2008/06/identity/claims/role": "Admin" }`
4. **–ú–∞—Å—Å–∏–≤ —Ä–æ–ª–µ–π**: `{ "roles": ["Admin", "User"] }`

## üéØ –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```typescript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
if (userRole === 'Admin' || userRole === 'admin' || 
    (Array.isArray(userRole) && userRole.includes('Admin'))) {
  router.push("/admin")  // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
} else {
  router.push("/")      // –û–±—ã—á–Ω—ã–π UI
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–æ–ª—å** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–æ–ª—å –≤ JWT
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å** - —Ç–∞–º –±—É–¥—É—Ç –ª–æ–≥–∏ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–∏
3. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (`/profile`) –ø–æ–º–æ–∂–µ—Ç –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–æ–ª—è–º–∏

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ **Admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ **Customer –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –æ—Å—Ç–∞—é—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º UI
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** —Ä–æ–ª–∏ –≤ JWT
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ
